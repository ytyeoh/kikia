<div class="page-header">
  <%= link_to users_path, class: 'btn btn-default' do %>
    <span class="glyphicon glyphicon-list-alt"></span>
    Back
  <% end %>
  <%= link_to edit_user_path(@user), class: 'btn btn-primary' do %>
    <span class="glyphicon glyphicon-pencil"></span>
    Edit
  <% end %>
  <h1>Show user</h1>
</div>

<dl class="dl-horizontal">
  <dt>Name:</dt>
  <dd><%= @user.name %></dd>

  <dt>Email:</dt>
  <dd><%= @user.email %></dd>

  <dt>Image:</dt>
  <dd> <%= image_tag @user.image.url(:medium) %></dd>
  <dt>Identity card:</dt>
  <dd><%= @user.identity_card %></dd>

  <dt>Stage:</dt>
  <dd><%= @user.stage %></dd>
  <% if @reviews %>
    <% @reviews.each do |review| %>
      <dt>Review:</dt>
      <dd><%= review.comment %></dd>
      <dt>Rate By:</dt>
      <dd><%= review.booking.name %></dd>
      <div class="star-rating" data-score=<%= review.rating %>></div>
    <% end %>
  <% end %>
</dl>

<div class="row">
  <div class="col-md-6">
    <% @user_credit.each do |x| %>
      <div class="table-responsive">
        <table class="table table-striped table-bordered table-hover">
          <thead>
            <tr>
              <th>Amount</th>
              <th>Purchase Date</th>
            </tr>
          </thead>

          <tbody>
            <tr>
              <th><%= x.amount %></th>
              <th><%= x.created_at.to_time.strftime('%e %B %Y at %l:%M %p') %></th>
            </tr>
          </tbody>
        </table>
      </div>
    <% end %>
    <button type="button" class="btn btn-info btn-lg" data-toggle="modal" data-target="#topup">Topup Credit</button>
  <!-- Modal -->
    <div class="modal fade" id="topup" role="dialog">
      <div class="modal-dialog">     
        <!-- Modal content-->
        <div class="modal-content">
          <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal">&times;</button>
            <h4 class="modal-title">Topup Credit</h4>
          </div>
          <div class="modal-body">
            <form id="checkout" method="post" action="/credits/checkout">
            <div id="payment-form">
              <div class="field">
                <label for="user_creditcredit">Credit Purchase</label> <br>
                <input type= "number" name="user_credit[credits]"> 
              </div>        
            </div>
            <div class="modal-footer">
              <input type="submit" class= "btn btn-info" value="Pay">
          
              <button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button>           
            </div>
            </form>
          </div>       
        </div>
      </div>
    </div>
  </div>
</div>
